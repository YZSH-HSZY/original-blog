# vim/vi
vim是vi的扩展版，一款文本编辑器

## vim模式

### 一般模式（命令模式）

### 编辑模式

### 底线命令模式

#### 字符替换
- `:%s/from/to/g` 在所有行中搜索替换
- `:1,$s/from/to/g` 在所有行中搜索替换
- `:1,10s/from/to/g` 在第1到10行中搜索替换
- `:10s/from/to/g` 在第10行中搜索替换


## vim寄存器

vim中可通过 `:reg` 来查看每个寄存器当前的值

> 参考文档
- [博客园-vim寄存器](https://www.cnblogs.com/a3192048/p/12241255.html)

### vim寄存器分类

vim提供了10类寄存器, 使用 `:help registers` 查看帮助

- 匿名寄存器 `""`
    > 使用d, c, s, x等会删除字符的命令时，被删除字符会进入匿名寄存器`""`
- 编号寄存器 `"0` 到 `"9`
    > `"0`保存着拷贝来的字符串，`"1`到`"9`保存着删除掉的字符串(vim会保存你最近的9次删除)
- 小删除寄存器 `"-`
    > 不足一行的小删除则会被放到小删除寄存器中`"-`
- 26个命名寄存器 `"a` 到 `"z`
    > 命名寄存器有`"a`到`"z`共26个, 这些寄存器只有指定时才会被使用
- 3个只读寄存器 `":`, `".`, `"%`
    > `".`: 上次insert模式中插入的字符串
    > `"%`: 当前文件名(当前Vim的工作目录到该文件的路径)
    > `":`: 上次命令模式下键入的命令
- Buffer交替文件寄存器 `"#`
    > `"#` 存储着当前vim窗口的交替文件(指 Buffer中的上一个文件),可通过`Ctrl+^`来切换交替文件与当前文件
- 表达式寄存器 `"=`
    > 用于计算vim脚本的返回值, 按`p`并插入到文本中
- 选区和拖放寄存器 `"*`, `"+`, `"~`
    > `"*`和`"+`在Mac和Windows中,都是指系统剪贴板(clipboard);如`"*yy`即可复制当前行到剪贴板
    > 在X11桌面中, `"*`指PRIMARY选区(按鼠标中键粘贴),`"+`指CLIPBOARD选区(按Ctrl+V粘贴)
    > 拖拽文本到vim时, 被拖拽的文本被存储在`"~`中
- 黑洞寄存器 `"_`
    > 所有删除或拷贝到黑洞寄存器的文本将会消失, 为了不影响任何寄存器的值
- 搜索模式寄存器 `"/`
    > 存储上一次搜索的关键词, 该寄存器是可写的, 例如`:let @/ = "harttle"`将会把"harttle"写入该寄存器。下次搜索时不输入搜索词直接回车便会搜索"harttle"

### vim寄存器使用示例

- `"*p` Window下将系统剪切板内容复制到当前行

## vim配置

vim的配置文件有 `/etc/vim/vimrc`/`~/.vimrc`

### 常用vim配置

- 设置tap为4个空格 `set tabstop=4`(设置缩进宽度)
- 使用空格代替缩进 `set expandtab`
- 自动缩进 `set autoindent`
- 显示行号 `set number`
- 显示列 `set ruler`
- 显示相对行号(基于当前行) `set relativenumber`
- 取消显示行号 `set nonumber`
- 高亮当前行 `set cursorline`
- 设置vim剪贴板和系统剪贴板同步 `set clipboard=unnamed`

## vim常用文本编辑命令
- `u` 撤销
- `ctrl+r` 重做（恢复）
- `d` 删除一个字符（后接删除方向）
- `dd` 删除本行
- `D` 删除至行尾
- `a` 在当前后一个字符编辑
- `i` 在当前字符编辑
- `v` 进入选择文本模式
- `V` 选中当前行并进入选择文本模式
- `w` 保存
- `w {another_file}` 另存为

## vim实用技巧

### vim宏录制

vim可以通过宏录制的方式进行大量重复操作, 如

- py中在行首添加注释
> 在一般模式下按 `q` + 任意寄存器如 `w` 进入录制模式, 操作 `j` --> `^` --> `i` --> `# ` --> `ESC` --> `q`结束录制.
> 之后通过 `num@w` 进行指定num次数的回放

### vim列编辑模式

- `Ctrl`+`v`/`Ctrl`+`q`,前者在linux下,后者在window下,进入列编辑模式
- 选择需要处理的行
- 按 `I` 在光标前插入, `A` 在光标后插入

### vim分屏
在底线命令模式下 `:sp {file_name}`/`:vsp {file_name}` 进入水平或垂直编辑

## vim插件
