# proc文件系统

proc文件系统(procfs)是一种虚拟文件系统，用于提供关于系统和进程的信息。通常挂载在 `/proc` 目录下

> proc文件系统提供了许多关于系统和进程的信息, 包括:
> - 进程列表(`/proc/[pid]`): 每个进程都有一个对应的目录, 包含该进程的信息, 如进程状态、内存使用情况等
> - 系统信息(`/proc/sys`): 包含系统的各种信息，如内核版本、系统时间、CPU信息等
> - 设备信息(`/proc/devices`): 包含系统中设备的信息，如设备号、设备名称等
> - 文件系统信息(`/proc/filesystems`): 包含系统中文件系统的信息，如文件系统类型、挂载点等

**注意** proc文件系统的内容是动态生成的，随着系统和进程的变化而变化
**注意** proc文件系统在内核空间和用户空间之间打开了一个通信窗口, 系统管理员和开发人员可以用方便的方式来获取系统和进程的信息

## proc下文件作用

- `cmdline`: 系统启动时输入给内核命令行参数
- `cpuinfo`: CPU的硬件信息 (型号, 家族, 缓存大小等)
- `devices`: 主设备号及设备组的列表，当前加载的各种设备（块设备/字符设备）
- `dma`: 使用的DMA通道
- `filesystems`: 当前内核支持的文件系统，当没有给 mount(1) 指明哪个文件系统的时候， mount(1) 就依靠该文件遍历不同的文件系统
- `interrupts`: 中断的使用及触发次数，调试中断时很有用
- `ioports I/O`: 当前在用的已注册 I/O 端口范围
- `kcore`: 该伪文件以 core 文件格式给出了系统的物理内存映象(比较有用)，可以用 GDB 查探当前内核的任意数据结构。该文件的总长度是物理内存 (RAM) 的大小再加上 4KB
- `kmsg`: 可以用该文件取代系统调用 syslog(2) 来记录内核日志信息，对应dmesg命令
- `kallsym`: 内核符号表，该文件保存了内核输出的符号定义, modules(X)使用该文件动态地连接和捆绑可装载的模块
- `loadavg`: 负载均衡，平均负载数给出了在过去的 1、 5,、15 分钟里在运行队列里的任务数、总作业数以及正在运行的作业总数。
- `locks`: 内核锁 。
- meminfo物理内存、交换空间等的信息，系统内存占用情况，对应df命令。
- `misc`: 杂项 。
- `modules`: 已经加载的模块列表，对应lsmod命令 。
- `mounts`: 已加载的文件系统的列表，对应mount命令，无参数。
- `partitions`: 系统识别的分区表 。
- `slabinfo`: sla池信息。
- `stat`: 全面统计状态表，CPU内存的利用率等都是从这里提取数据。对应ps命令。
- `swaps`: 对换空间的利用情况。
- `version`: 指明了当前正在运行的内核版本

## 在可加载内核模块(LKM)操作procfs文件系统